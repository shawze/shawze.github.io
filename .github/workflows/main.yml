name: sync cos
on: 
  push:
    branches: 
    - main
jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
    - name: install coscmd
      run: |
        pip3 install setuptools
        cd /tmp
        git clone https://github.com/tencentyun/coscmd.git
        cd coscmd
        python3 setup.py install
    - name: config coscmd
      run: | 
        coscmd config -a ${{ secrets.SECRETID }} -s ${{ secrets.SECRETKEY }} -b ${{ secrets.COS_BUCKET }} -r ${{ secrets.COS_REGION }}
    - name: Sync COS
      run: |
        cd /tmp
        git clone https://github.com/shawze/shawze.github.io.git
        cd shawze.github.io
        coscmd -r / /
        
